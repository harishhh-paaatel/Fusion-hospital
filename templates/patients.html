{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h4 style="color:var(--brand); margin:0">Patients</h4>
    <div class="muted">Manage patients â€” add, edit, delete</div>
  </div>
  <div>
    <a class="btn btn-sm btn-brand" href="{{ url_for('add_patient') }}"><i class="bi bi-plus-lg"></i> Add Patient</a>
  </div>
</div>

<div class="card-pro">
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead>
        <tr><th>Name</th><th>Gender</th><th>Phone</th><th>Age</th><th>Address</th><th>Disease</th><th>DOB</th><th class="text-end">Actions</th></tr>
      </thead>
      <tbody>
        {% if patients %}
          {% for p in patients %}
          <tr>
            <td class="fw-semibold">{{ p[1] }}</td>
            <td>{{ p[2] or '-' }}</td>
            <td class="muted">{{ p[3] or '-' }}</td>
            <td>{{ p[5] or '-' }}</td>
            <td class="muted">{{ p[4] or '-' }}</td>
            <td class="muted">{{ p[6] or '-' }}</td>
            <td class="muted">{{ p[7] or '-' }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('edit_patient', patient_id=p[0]) }}"><i class="bi bi-pencil"></i></a>
              <form method="post" action="{{ url_for('delete_patient', patient_id=p[0]) }}" style="display:inline" onsubmit="return confirm('Delete patient?');">
                <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
              </form>
            </td>
          </tr>
          {% endfor %}
        {% else %}
          <tr><td colspan="8" class="text-center muted">No patients found.</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
